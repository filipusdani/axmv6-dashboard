<nav class="flex items-center justify-between flex-wrap bg-[#800507] p-4">
    <div class="flex flex-row items-center text-white">
        <svg  viewBox="0 0 500 500" transform="scale(-1,1)" xmlns="http://www.w3.org/2000/svg" class="fill-white lg:size-16">
            <path d="M 395.363 432 L 395.363 416 L 411.363 416 L 411.363 368 L 395.363 368 L 395.363 352 L 427.363 352 L 427.363 280 L 360.811 280 L 453.563 199.616 C 462.331 192.008 467.363 180.992 467.363 169.392 L 467.363 137.4 L 474.979 130.872 C 480.307 126.296 483.363 119.656 483.363 112.64 L 483.363 96 L 483.363 80 L 483.363 56 C 483.363 33.944 465.419 16 443.363 16 L 259.363 16 L 259.363 32 L 227.363 32 L 227.363 0 L 171.363 0 L 163.363 0 L 105.475 0 L 67.363 19.056 L 67.363 48 L 131.363 48 L 131.363 64 L 67.363 64 L 67.363 92.944 L 105.475 112 L 163.363 112 L 171.363 112 L 227.363 112 L 227.363 80 L 259.363 80 L 259.363 96 L 374.427 96 L 239.339 216.864 C 214.387 221.272 195.363 243.064 195.363 269.256 C 195.363 283.48 200.899 296.848 210.963 306.912 L 256.051 352 L 283.363 352 L 283.363 368 L 267.363 368 L 267.363 416 L 283.363 416 L 283.363 432 L 128 432 L 128 496 L 496 496 L 496 432 L 395.363 432 Z M 163.363 96 L 109.251 96 L 83.363 83.056 L 83.363 80 L 147.363 80 L 147.363 32 L 83.363 32 L 83.363 28.944 L 109.251 16 L 163.363 16 L 163.363 96 Z M 211.363 96 L 179.363 96 L 179.363 16 L 211.363 16 L 211.363 96 Z M 259.363 64 L 227.363 64 L 227.363 48 L 259.363 48 L 259.363 64 Z M 395.363 400 L 379.363 400 L 379.363 384 L 395.363 384 L 395.363 400 Z M 379.363 416 L 379.363 432 L 299.363 432 L 299.363 416 L 379.363 416 Z M 315.363 400 L 315.363 384 L 331.363 384 L 331.363 400 L 315.363 400 Z M 347.363 400 L 347.363 384 L 363.363 384 L 363.363 400 L 347.363 400 Z M 299.363 368 L 299.363 352 L 379.363 352 L 379.363 368 L 299.363 368 Z M 451.363 169.392 C 451.363 176.352 448.347 182.96 443.083 187.528 L 336.371 280 L 334.675 280 L 319.123 264.448 L 451.363 151.112 L 451.363 169.392 Z M 291.363 80 L 275.363 80 L 275.363 32 L 291.363 32 L 291.363 80 Z M 307.363 80 L 307.363 32 L 443.363 32 C 456.595 32 467.363 42.768 467.363 56 L 467.363 80 L 392.307 80 L 307.363 80 Z M 398.419 96 L 467.363 96 L 467.363 112.64 C 467.363 114.984 466.347 117.192 464.571 118.72 L 307.787 253.112 L 286.283 231.608 C 279.531 224.856 271.267 220.192 262.275 217.824 L 398.419 96 Z M 262.675 336 L 222.275 295.6 C 215.235 288.56 211.363 279.208 211.363 269.256 C 211.363 248.712 228.075 232 248.619 232 C 258.571 232 267.923 235.872 274.963 242.912 L 328.051 296 L 411.363 296 L 411.363 336 L 262.675 336 Z M 283.363 384 L 299.363 384 L 299.363 400 L 283.363 400 L 283.363 384 Z M 480 480 L 464 480 L 464 464 L 448 464 L 448 480 L 432 480 L 432 464 L 416 464 L 416 480 L 400 480 L 400 464 L 384 464 L 384 480 L 368 480 L 368 464 L 352 464 L 352 480 L 336 480 L 336 464 L 320 464 L 320 480 L 304 480 L 304 464 L 288 464 L 288 480 L 272 480 L 272 464 L 256 464 L 256 480 L 240 480 L 240 464 L 224 464 L 224 480 L 208 480 L 208 464 L 192 464 L 192 480 L 176 480 L 176 464 L 160 464 L 160 480 L 144 480 L 144 448 L 480 448 L 480 480 Z"/>
            <path d="M 247.363 248 C 236.331 248 227.363 256.968 227.363 268 C 227.363 279.032 236.331 288 247.363 288 C 258.395 288 267.363 279.032 267.363 268 C 267.363 256.968 258.395 248 247.363 248 Z M 247.363 272 C 245.163 272 243.363 270.2 243.363 268 C 243.363 265.8 245.163 264 247.363 264 C 249.563 264 251.363 265.8 251.363 268 C 251.363 270.2 249.563 272 247.363 272 Z"/>
        </svg>
        <span class="text-nowrap text-4xl font-semibold tracking-tight">AX-MV6 Dashboard</span>
    </div>
    <button mat-icon-button (click)="showInfo()">
        <mat-icon [ngStyle]="{'color':'white'}">more_vert</mat-icon>
    </button>
</nav>

<div class="flex flex-wrap justify-center bg-transparent text-[#F2F2F2]">

<!-- EMERGENCY STOP -->
<mat-card class="container w-96 h-28 m-3">
    <mat-card-content class="my-2">
        <button (click)="emergencyStop()" class="w-full h-16 bg-[#FF4C4C] hover:bg-red-500 text-white font-bold py-2 px-4 rounded inline-flex justify-center items-center">
            <mat-icon class="mr-2">error_outline</mat-icon>
            <span class="text-xl">EMERGENCY STOP</span>
        </button>          
    </mat-card-content>
</mat-card>

<!-- ROBOT MODE -->
<mat-card class="container w-96 h-28 m-3">
    <mat-card-header>
        <mat-card-title>ROBOT MODE</mat-card-title>
    </mat-card-header>
    <mat-card-content class="my-2">
        <div class="flex flex-row justify-between">
            <div [style.backgroundColor]="teach_mode=='playback'?on_color : off_color" class="p-2 rounded w-[170px] text-center font-semibold">PLAYBACK</div>
            <div [style.backgroundColor]="teach_mode=='teach'?on_color : off_color" class="p-2 rounded w-[170px] text-center font-semibold">TEACH</div>
        </div>
    </mat-card-content>
</mat-card>

<!-- IO BOARD -->
<mat-card class="container w-96 h-28 m-3">
    <mat-card-header>
        <mat-card-title>I/O BOARD</mat-card-title>
    </mat-card-header>
    <mat-card-content class="my-2">
        <mat-grid-list class="w-128 text-xs" cols="16" rowHeight="20px" gutterSize="2px">
            <mat-grid-tile *ngFor="let i of io_board"
                class="border rounded"
                colspan=1
                rowspan=1
                [style.background]="i.state=='1'?on_color : off_color">{{i.id}}
            </mat-grid-tile>
        </mat-grid-list>
    </mat-card-content>
</mat-card>

<!-- OPERATION MODE -->
<mat-card class="container w-96 h-28 m-3">
    <mat-card-header>
        <mat-card-title>OPERATION MODE</mat-card-title>
    </mat-card-header>
    <mat-card-content class="my-2">
        <mat-button-toggle-group class="w-full border-none font-semibold" #group="matButtonToggleGroup" [value]="operation_mode" (change)="onOperationChange(group.value)">
            <mat-button-toggle value="auto" style="width:50%">AUTO</mat-button-toggle>
            <mat-button-toggle value="manual" style="width:50%">MANUAL</mat-button-toggle>
          </mat-button-toggle-group>
    </mat-card-content>
</mat-card>

<!-- MANUAL RUN -->
<mat-card class="container w-96 h-28 m-3" *ngIf="operation_mode === 'manual'">
    <mat-card-header>
        <mat-card-title>MANUAL RUN</mat-card-title>
    </mat-card-header>
    <mat-card-content class="my-2">
        <div class="flex flex-row">
            <input type="number" [(ngModel)]="manual_program_num" class="block w-3/4 h-10 p-4 text-black border rounded-lg bg-white text-base focus:ring-blue-500" placeholder="Input Program Number">
            <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 ml-2 rounded w-1/4" (click)="operationManual()">GO</button>
        </div>
    </mat-card-content>
</mat-card>

<!-- AUTO RUN -->
<mat-card class="container w-96 h-28 m-3" *ngIf="operation_mode === 'auto'">
    <mat-card-header>
        <mat-card-title>AUTO RUN</mat-card-title>
    </mat-card-header>
    <mat-card-content class="my-2">
        <div class="">
            <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold w-[170px] h-10 rounded" (click)="operationAuto('start')">START</button>
            <button class="bg-red-500 hover:bg-red-700 text-white font-bold w-[170px] h-10 rounded ml-3" (click)="operationAuto('stop')">STOP</button>
        </div>
    </mat-card-content>
</mat-card>

<!-- PROGRAM SEQUENCE -->
<mat-card class="container w-96 h-36 m-3">
    <mat-card-header>
        <mat-card-title>PROGRAM SEQUENCE</mat-card-title>
    </mat-card-header>
    <mat-card-content class="">
        <div class="flex flex-row justify-between">
            <div class="space-y-1">
                <label>Program State</label>
                <div [style.backgroundColor]="program_sequence.start=='1'?'#3C82F6' : '#FF4C4C'" [style.color]="program_sequence.start=='1'?'#f2f2f2' : '#f2f2f2'" class="h-12 p-2 text-2xl rounded w-[170px] text-center font-semibold">{{program_sequence.start=='1'?'RUNNING' : 'STOPPED'}}</div>
            </div>
            <div class="space-y-1">
                <label>Program Number</label>
                <div class="h-12 p-2 text-2xl rounded w-[170px] text-center text-[#f2f2f2] font-semibold bg-[#363A45]">{{program_sequence.number}}</div>
            </div>
        </div>
        <mat-progress-bar mode="indeterminate" *ngIf="program_sequence.start=='1'" class="my-2"></mat-progress-bar>
    </mat-card-content>
</mat-card>

<!-- CAMERA FEED -->
<mat-card class="container w-96 m-3">
    <mat-card-header>
        <mat-card-title>CAMERA FEED</mat-card-title>
    </mat-card-header>
    <img mat-card-image src="https://cdn.osxdaily.com/wp-content/uploads/2013/12/there-is-no-connected-camera-mac.jpg" alt="Photo of a Shiba Inu">
    <mat-card-content>
        <div class="my-2">
            <span>Time: {{camera_timestamp}}</span>
        </div>
    </mat-card-content>
</mat-card>

</div>